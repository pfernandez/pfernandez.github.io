import{B as a,H as s,F as m,T as u}from"./index-qNrukWGA.js";const d={Comment(t,e){for(;t.i<t.string.length&&t.string.charAt(t.i)!==`
`;)t.i++;t.i++},Math(t,e){t.saveText();const n=t.i;let c,o,i=0;for(;o=t.GetNext();)switch(c=t.i++,o){case"\\":t.GetCS()===")"&&(o="\\(");case"$":if(i===0&&e===o){const l=t.texParser.configuration,h=new u(t.string.substring(n,c),t.stack.env,l).mml();t.PushMath(h);return}break;case"{":i++;break;case"}":i===0&&t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace"),i--;break}t.Error("MathNotTerminated","Math mode is not properly terminated")},MathModeOnly(t,e){t.Error("MathModeOnly","'%1' allowed only in math mode",e)},Misplaced(t,e){t.Error("Misplaced","Misplaced '%1'",e)},OpenBrace(t,e){const n=t.stack.env;t.envStack.push(n),t.stack.env=Object.assign({},n)},CloseBrace(t,e){t.envStack.length?(t.saveText(),t.stack.env=t.envStack.pop()):t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace")},OpenQuote(t,e){t.string.charAt(t.i)===e?(t.text+="“",t.i++):t.text+="‘"},CloseQuote(t,e){t.string.charAt(t.i)===e?(t.text+="”",t.i++):t.text+="’"},Tilde(t,e){t.text+=" "},Space(t,e){t.text+=" ",t.GetNext()},SelfQuote(t,e){t.text+=e.substring(1)},Insert(t,e,n){t.text+=n},Accent(t,e,n){const c=t.ParseArg(e),o=t.create("token","mo",{},n);t.addAttributes(o),t.Push(t.create("node","mover",[c,o]))},Emph(t,e){const n=t.stack.env.mathvariant==="-tex-mathit"?"normal":"-tex-mathit";t.Push(t.ParseTextArg(e,{mathvariant:n}))},TextFont(t,e,n){t.saveText(),t.Push(t.ParseTextArg(e,{mathvariant:n}))},SetFont(t,e,n){t.saveText(),t.stack.env.mathvariant=n},SetSize(t,e,n){t.saveText(),t.stack.env.mathsize=n},CheckAutoload(t,e){const n=t.configuration.packageData.get("autoload"),c=t.texParser;e=e.slice(1);const o=c.lookup(s.MACRO,e);if(!o||n&&o._func===n.Autoload){if(c.parse(s.MACRO,[c,e]),!o)return;m(Promise.resolve())}c.parse(s.MACRO,[t,e])},Macro:a.Macro,Spacer:a.Spacer,Hskip:a.Hskip,rule:a.rule,Rule:a.Rule,HandleRef:a.HandleRef,UnderOver:a.UnderOver,Lap:a.Lap,Phantom:a.Phantom,Smash:a.Smash,MmlToken:a.MmlToken};export{d as T};
