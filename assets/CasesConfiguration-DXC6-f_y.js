import{m as y,C as d,a as u,H as m,B as l,e as C,j as f,E,M as N}from"./index-qNrukWGA.js";import{AmsTags as P}from"./AmsConfiguration-CVfSW1nD.js";import{E as T}from"./EmpheqUtil-CD6XaIod.js";import"./index-DkSxGWYw.js";import"./AmsItems-NuYjO1V3.js";import"./AmsMethods-6XJX1NdH.js";import"./NewcommandUtil-D3UYa-Vw.js";import"./NewcommandConfiguration-Br7R5afP.js";import"./NewcommandMethods-BDZl_aKP.js";class h extends y{get kind(){return"cases-begin"}checkItem(t){return t.isKind("end")&&t.getName()===this.getName()&&this.getProperty("end")?(this.setProperty("end",!1),[[],!0]):super.checkItem(t)}}class b extends P{constructor(){super(...arguments),this.subcounter=0}start(t,n,s){this.subcounter=0,super.start(t,n,s)}autoTag(){this.currentTag.tag==null&&(this.currentTag.env==="subnumcases"?(this.subcounter===0&&this.counter++,this.subcounter++,this.tag(this.formatNumber(this.counter,this.subcounter),!1)):(this.currentTag.env!=="numcases-left"&&this.counter++,this.tag(this.formatNumber(this.counter),!1)))}formatNumber(t,n=null){return t.toString()+(n===null?"":String.fromCharCode(96+n))}}const i={NumCases(e,t){if(e.stack.env.closing===t.getName()){delete e.stack.env.closing,e.Push(e.itemFactory.create("end").setProperty("name",t.getName()));const n=e.stack.Top(),s=n.Last,a=f.copyNode(s,e),c=n.getProperty("left");return T.left(s,a,c+"\\mmlToken{mo}{\\U{7B}}\\,",e,"numcases-left"),e.Push(e.itemFactory.create("end").setProperty("name",t.getName())),null}else{const n=e.GetArgument("\\begin{"+t.getName()+"}");t.setProperty("left",n);const s=l.EqnArray(e,t,!0,!0,"ll","tt");return s.arraydef.displaystyle=!1,s.arraydef.rowspacing=".2em",s.setProperty("numCases",!0),e.Push(t),s}},Entry(e,t){if(!e.stack.Top().getProperty("numCases"))return l.Entry(e,t);e.Push(e.itemFactory.create("cell").setProperties({isEntry:!0,name:t}));const n=e.string;let s=0,a=e.i;const c=n.length;for(;a<c;){const o=n.charAt(a);if(o==="{")s++,a++;else if(o==="}"){if(s===0)break;s--,a++}else{if(o==="&"&&s===0)throw new C("ExtraCasesAlignTab","Extra alignment tab in text for numcase environment");if(o==="\\"&&s===0){const r=(n.slice(a+1).match(/^[a-z]+|./i)||[])[0];if(r==="\\"||r==="cr"||r==="end"||r==="label"||r===void 0)break;a+=r.length}else a++}}const g=n.substring(e.i,a).replace(/^\s*/,"");return e.PushAll(f.internalMath(e,g,0)),e.i=a,null},environment(e,t,n,s){const a=e.itemFactory.create("cases-begin").setProperties({name:t,end:!0});e.Push(n(e,a,...s))}};new E("cases-env",i.environment,{numcases:[i.NumCases,"cases"],subnumcases:[i.NumCases,"cases"]});new N("cases-macros",{"&":i.Entry});const F=d.create("cases",{[u.HANDLER]:{[m.ENVIRONMENT]:["cases-env"],[m.CHARACTER]:["cases-macros"]},[u.ITEMS]:{[h.prototype.kind]:h},[u.TAGS]:{cases:b}});export{h as CasesBeginItem,F as CasesConfiguration,i as CasesMethods,b as CasesTags};
