import{j as c,T as h}from"./index-qNrukWGA.js";const a={splitOptions(t,n=null){return c.keyvalOptions(t,n,!0)},columnCount(t){let n=0;for(const e of t.childNodes){const i=e.childNodes.length-(e.isKind("mlabeledtr")?1:0);i>n&&(n=i)}return n},cellBlock(t,n,e,i){const d=e.create("node","mpadded",[],{height:0,depth:0,voffset:"-1height"}),o=new h(t,e.stack.env,e.configuration),l=o.mml();i&&o.configuration.tags.label&&(o.configuration.tags.currentTag.env=i,o.configuration.tags.getTag(!0));for(const s of l.isInferred?l.childNodes:[l])d.appendChild(s);return d.appendChild(e.create("node","mphantom",[e.create("node","mpadded",[n],{width:0})])),d},topRowTable(t,n){const e=c.copyNode(t,n);return e.setChildren(e.childNodes.slice(0,1)),e.attributes.set("align","baseline 1"),t.factory.create("mphantom",{},[n.create("node","mpadded",[e],{width:0})])},rowspanCell(t,n,e,i,d){t.appendChild(i.create("node","mpadded",[this.cellBlock(n,c.copyNode(e,i),i,d),this.topRowTable(e,i)],{height:0,depth:0,voffset:"height"}))},left(t,n,e,i,d=""){t.attributes.set("columnalign","right "+t.attributes.get("columnalign")),t.attributes.set("columnspacing","0em "+t.attributes.get("columnspacing")),t.childNodes.length===0&&t.appendChild(i.create("node","mtr"));let o;for(const l of t.childNodes.slice(0).reverse())o=i.create("node","mtd"),l.childNodes.unshift(o),o.parent=l,l.isKind("mlabeledtr")&&(l.childNodes[0]=l.childNodes[1],l.childNodes[1]=o);this.rowspanCell(o,e,n,i,d)},right(t,n,e,i,d=""){t.childNodes.length===0&&t.appendChild(i.create("node","mtr"));const o=t.childNodes[0],l=a.columnCount(t)+(o.isKind("mlabeledtr")?1:0);for(;o.childNodes.length<l;)o.appendChild(i.create("node","mtd"));const s=o.appendChild(i.create("node","mtd"));a.rowspanCell(s,e,n,i,d),t.attributes.set("columnalign",(t.attributes.get("columnalign")||"").split(/ /).slice(0,l).join(" ")+" left"),t.attributes.set("columnspacing",t.attributes.get("columnspacing").split(/ /).slice(0,l-1).join(" ")+" 0em")},adjustTable(t,n){const e=t.getProperty("left"),i=t.getProperty("right");if(e||i){const d=t.Last,o=c.copyNode(d,n);e&&this.left(d,o,e,n),i&&this.right(d,o,i,n)}},allowEnv:{equation:!0,align:!0,gather:!0,flalign:!0,alignat:!0,multline:!0},checkEnv(t){return Object.hasOwn(this.allowEnv,t.replace(/\*$/,""))||!1}};export{a as E};
