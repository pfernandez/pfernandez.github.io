import{e as x,C as T,a as i,G as s,H as g,M as u}from"./index-qNrukWGA.js";import"./index-DkSxGWYw.js";const r={TexHTML(t,m){if(!t.options.allowTexHTML)return!1;const n=t.string.slice(t.i).match(/^tex-html(?: n="(\d+)")?>/);if(!n)return!1;t.i+=n[0].length;const o=(n[1]?`<!${n[1]}>`:"")+"</tex-html>",e=t.string.slice(t.i).indexOf(o);if(e<0)throw new x("TokenNotFoundForCommand","Could not find %1 for %2",o,"<"+n[0]);const c=t.string.substring(t.i,t.i+e).trim();t.i+=e+11+(n[1]?3+n[1].length:0);const l=t.configuration.packageData.get("texhtml").adaptor,a=l.childNodes(l.body(l.parse(c)));if(a.length===0)return!0;const d=a.length===1?a[0]:l.node("div",{},a),h=t.create("node","html").setHTML(d,l);return t.Push(t.create("node","mtext",[h])),!0}};new u("tex-html",{"<":r.TexHTML});const M=T.create("texhtml",{[i.HANDLER]:{[g.CHARACTER]:["tex-html"]},[i.OPTIONS]:{allowTexHTML:!1},[i.CONFIG]:()=>{if(s){const t=s.OPTIONS.includeHtmlTags;t["tex-html"]||(t["tex-html"]=(m,n)=>{const o=n.innerHTML(m),e=o.split(/<\/tex-html>/).length;return`<tex-html${e>1?` n="${e}"`:""}>`+o+(e>1?`<!${e}>`:"")+"</tex-html>"})}},[i.PREPROCESSORS]:[t=>{t.data.packageData.set("texhtml",{adaptor:t.document.adaptor})}],[i.POSTPROCESSORS]:[t=>{t.data.packageData.set("texhtml",{adaptor:null})}]});export{r as HtmlNodeMethods,M as TexHtmlConfiguration};
