import{C as r,a as u,H as g,b as C,e as l,O as w,U,X as x,N as S}from"./index-qNrukWGA.js";import"./index-DkSxGWYw.js";const f={},d={Unicode(t,a){const n=t.GetBrackets(a);let i=null,e="";if(n&&(n.replace(/ /g,"").match(/^(\d+(\.\d*)?|\.\d+),(\d+(\.\d*)?|\.\d+)$/)?(i=n.replace(/ /g,"").split(/,/),e=t.GetBrackets(a)||""):e=n),e.match(/;/))throw new l("BadFont","Font name for %1 can't contain semicolons",t.currentCS);const o=U.trimSpaces(t.GetArgument(a)).replace(/^0x/,"x");if(!o.match(/^(x[0-9A-Fa-f]+|[0-9]+)$/))throw new l("BadUnicode","Argument to %1 must be a number",t.currentCS);const c=parseInt(o.match(/^x/)?"0"+o:o);f[c]?e||(e=f[c][2]):f[c]=[800,200,e,c],i&&(f[c][0]=Math.floor(parseFloat(i[0])*1e3),f[c][1]=Math.floor(parseFloat(i[1])*1e3));const s=t.stack.env.font,m={};e?(f[c][2]=m.fontfamily=e.replace(/'/g,"'"),s&&(s.match(/bold/)&&(m.fontweight="bold"),s.match(/italic|-mathit/)&&(m.fontstyle="italic"))):s&&(m.mathvariant=s);const h=t.create("token","mtext",m,x(o));S.setProperty(h,"unicode",!0),t.Push(h)},RawUnicode(t,a){const n=t.GetArgument(a).trim();if(!n.match(/^[0-9A-F]{1,6}$/))throw new l("BadRawUnicode","Argument to %1 must a hexadecimal number with 1 to 6 digits",t.currentCS);const i=parseInt(n,16);t.string=String.fromCodePoint(i)+t.string.substring(t.i),t.i=0},Char(t,a){let n;const i=t.GetNext();let e="";const o=t.string.substring(t.i);if(i==="'")n=o.match(/^'([0-7]{1,7}) ?/u),n&&(e=String.fromCodePoint(parseInt(n[1],8)));else if(i==='"')n=o.match(/^"([0-9A-F]{1,6}) ?/),n&&(e=String.fromCodePoint(parseInt(n[1],16)));else if(i==="`"){if(n=o.match(/^`(?:(\\\S)|(.))/u),n)if(n[2])e=n[2];else{t.i+=2;const c=[...t.GetCS()];if(c.length>1)throw new l("InvalidAlphanumeric","Invalid alphanumeric constant for %1",t.currentCS);e=c[0],n=[""]}}else n=o.match(/^([0-9]{1,7}) ?/),n&&(e=String.fromCodePoint(parseInt(n[1])));if(!e)throw new l("MissingNumber","Missing numeric constant for %1",t.currentCS);t.i+=n[0].length,e>="0"&&e<="9"?t.Push(t.create("token","mn",{},e)):e.match(/[A-Za-z]/)?t.Push(t.create("token","mi",{},e)):w(t,e)}};new C("unicode",{unicode:d.Unicode,U:d.RawUnicode,char:d.Char});const P=r.create("unicode",{[u.HANDLER]:{[g.MACRO]:["unicode"]}});export{P as UnicodeConfiguration};
