import{r as c,e as o,N as i,n as u,j as f,h}from"./index-qNrukWGA.js";class w extends u{constructor(t,...e){super(t),this.factory.configuration.tags.start("multline",!0,e[0])}get kind(){return"multline"}EndEntry(){this.table.length&&f.fixInitialMO(this.factory.configuration,this.nodes);const t=this.getProperty("shove"),e=this.create("node","mtd",this.nodes,t?{columnalign:t}:{});this.setProperty("shove",null),this.row.push(e),this.Clear()}EndRow(){if(this.row.length!==1)throw new o("MultlineRowsOneCol","The rows within the %1 environment must have exactly one column","multline");const t=this.create("node","mtr",this.row);this.table.push(t),this.row=[]}EndTable(){if(super.EndTable(),this.table.length){const t=this.table.length-1;let e=-1;i.getAttribute(i.getChildren(this.table[0])[0],"columnalign")||i.setAttribute(i.getChildren(this.table[0])[0],"columnalign",h.Align.LEFT),i.getAttribute(i.getChildren(this.table[t])[0],"columnalign")||i.setAttribute(i.getChildren(this.table[t])[0],"columnalign",h.Align.RIGHT);const s=this.factory.configuration.tags.getTag();if(s){e=this.arraydef.side===h.Align.LEFT?0:this.table.length-1;const n=this.table[e],r=this.create("node","mlabeledtr",[s].concat(i.getChildren(n)));i.copyAttributes(n,r),this.table[e]=r}}this.factory.configuration.tags.end()}}class b extends c{get kind(){return"flalign"}constructor(t,e,s,n,r){super(t),this.name=e,this.numbered=s,this.padded=n,this.center=r,this.factory.configuration.tags.start(e,s,s)}EndEntry(){super.EndEntry();const t=this.getProperty("xalignat");if(t&&this.row.length>t)throw new o("XalignOverflow","Extra %1 in row of %2","&",this.name)}EndRow(){let t;const e=this.row,s=this.getProperty("xalignat");for(;e.length<s;)e.push(this.create("node","mtd"));for(this.row=[],this.padded&&this.row.push(this.create("node","mtd"));t=e.shift();)this.row.push(t),t=e.shift(),t&&this.row.push(t),(e.length||this.padded)&&this.row.push(this.create("node","mtd"));this.row.length>this.maxrow&&(this.maxrow=this.row.length),super.EndRow();const n=this.table[this.table.length-1];if(this.getProperty("zeroWidthLabel")&&n.isKind("mlabeledtr")){const r=i.getChildren(n)[0],l=this.factory.configuration.options.tagSide,d=Object.assign({width:0},l==="right"?{lspace:"-1width"}:{}),g=this.create("node","mpadded",i.getChildren(r),d);r.setChildren([g])}}EndTable(){if(super.EndTable(),this.center&&this.maxrow<=2){const t=this.arraydef;delete t.width,delete this.global.indentalign}}}export{b as F,w as M};
